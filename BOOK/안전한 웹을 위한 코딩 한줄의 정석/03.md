## 안전한 웹을 위한 코딩 한줄의 정석

```markdown
취약성이란? -> 실습 환경 -> 보안 기초 -> 취약성 패턴 및 대책 -> 대표적인 보안 기능 -> 웹 안전성을 높이기 위한 정책 -> 안전한 웹 어플리케이션 개발 프로세스
```

- 대표적인 보안 기능

### 대표적인 보안 기능

웹 어플리케이션 인증 수단으로는 HTTP 인증, HTML 폼에 ID와 패스워드를 입력시키는 폼 인증, SSL 클라이언트 인증서를 이용하는 클라이언트 인증 등이 있다.

#### 패스워드에 대한 어플리케이션 요건

어플리케이션은 이용자가 안전한 패스워드를 만들 수 있도록 방해하면 안된다.

전형적인 패스워드 문자 종류와 자릿수 요건:

- 문자 종류: 영숫자(대문자/소문자 구별)
- 자릿수: 8자리까지 입력 가능

조금 덜 엄격한 요건:

- 문자 중류: ASCII 문자 전부(0x20 ~ 0x7E)
- 자릿수: 128자리 이하

문자와 자릿수를 여유 있게 하면 패스워드가 아닌 패스프레이즈(Passphrase)를 이용할 수 있게 된다. 패스프레이즈는 짧은 단어 대신에 복수의 단어를 이용한 긴 패스워드를 말한다.

적극적인 패스워드 정책:

- 문자 종류에 대한 것 (영자/숫자/기호 각각 1자 이상)
- 자릿수 (8자리 이상)
- 유저 ID와 패스워드(계정과 같은 것) 금지
- 패스워드 사전에 있을 법한 단어 금지

#### 전수 공격에 대한 대책

기본적인 계정 잠금:

- 유저 ID당 패스워드 오류의 횟수를 기록
- 패스워드 오류의 횟수가 상한값을 넘으면 계정을 잠금
- 계정 잠김이 발생한 경우 메일 등으로 이용자와 관리자에게 통지
- 정상적으로 로그인한 경우 패스워드 오류 횟수를 초기화

안전한 패스워드 저장 방법

- 암호화
  - 키 생성과 키 보관 등의 과제가 생기기 때문에 메시지 다이제스트에 의한 보호가 많이 사용됨
- 메시지 다이제스트
  - 솔트와 스트레칭을 이용

자동 로그인의 안전한 구현 방식

- 세션의 수명을 연장
- 토큰을 사용
  - 유저 ID와 유효기간을 인수로 받아 내부에서 토큰을 만들고 자동 로그인 정보 테이블에 저장함과 동시에 토큰을 리턴하는 방법
  - 자동 로그인이 성공하면 원래 토큰 정보를 삭제하고 새로운 유효기간인 토큰을 재발행
- 티켓을 사용

#### 계정관리

- CAPTCHA에 의한 유저 자동 등록 대처
- 패스워드 변경시의 메일 통지
- 패스워드 리마인더
- 유저가 입력한 메일주소는 반드시 수신 확인
- 중요한 처리는 재인증
- 중요한 처리는 메일로 통지

#### 로그 출력의 요건

- 로그에 기록해야 할 이벤트
  - 로그인/로그아웃(실패한 경우도 포함)
  - 계정 잠금
  - 유저의 등록/삭제
  - 패스워드 변경
  - 중요 정보의 조회
  - 중요한 조작(상품의 구입, 송금, 메일 송신 등)
- 로그의 출력 항목
  - 4W1H(언제, 누가, 어디에서, 왜, 어떻게)에 따라서 기록
  - 접근 시간
  - 리모트 IP 주소
  - 유저 ID
  - 접근 대상(URL, 페이지 번호, 스크립트 ID 등)
  - 조작 내용(열람, 변경, 삭제 등)
  - 조작 대상(리소스 ID 등)
  - 조작 결과(성공 혹은 실패, 처리 건수 등)

